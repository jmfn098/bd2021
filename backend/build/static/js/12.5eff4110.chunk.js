(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[12],{707:function(e,t,a){"use strict";a.r(t);var n=a(649),s=a(1),r=a(666),c=a.n(r),o=a(669),l=a.n(o),i=a(19),u=a(644),j=a.n(u),d=a(645),b=a(646),m=a.n(b),p="".concat("https://fast-woodland-97208.herokuapp.com","/api/auth/"),O={register:function(e,t,a){return m.a.post(p+"signup",{username:e,email:t,password:a})},login:function(){var e=Object(d.a)(j.a.mark((function e(t,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.a.post(p+"signin",{cedula:t,password:a}).then((function(e){return e.data.token&&localStorage.setItem("userComunidad",JSON.stringify(e.data)),e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),logout:function(){localStorage.removeItem("user")},getCurrentUser:function(){return JSON.parse(localStorage.getItem("user"))}},h=a(85),f=a(639),x=a(641),g=a(29),v=function(e){if(!e)return Object(g.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})};t.default=function(e){var t=Object(s.useRef)(),a=Object(s.useRef)(),r=(Object(i.g)().state||{from:{pathname:"/"}}).from,o=Object(h.c)((function(e){return e.user})),u=Object(s.useState)(""),j=Object(n.a)(u,2),d=j[0],b=j[1],m=Object(s.useState)(""),p=Object(n.a)(m,2),N=p[0],w=p[1],C=Object(s.useState)(!1),S=Object(n.a)(C,2),y=S[0],k=S[1],I=Object(s.useState)(""),A=Object(n.a)(I,2),J=A[0],z=A[1],B=function(n){n.preventDefault(),z(""),k(!0),t.current.validateAll(),0===a.current.context._errors.length?O.login(d,N).then((function(){e.history.push("/"),window.location.reload()}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();k(!1),z(t)})):k(!1)};return null!==o?Object(g.jsx)(i.a,{to:r}):Object(g.jsx)("div",{className:"c-app c-default-layout flex-row align-items-center",children:Object(g.jsx)(f.k,{children:Object(g.jsx)(f.K,{className:"justify-content-center",children:Object(g.jsx)(f.j,{md:"4",children:Object(g.jsx)(f.h,{children:Object(g.jsx)(f.f,{className:"p-4",children:Object(g.jsx)(f.g,{children:Object(g.jsxs)(c.a,{onSubmit:B,ref:t,method:"POST",children:[Object(g.jsx)("div",{className:"h2",children:"Iniciar sesi\xf3n"}),Object(g.jsx)("p",{className:"text-muted",children:"Acceda a su cuenta"}),Object(g.jsxs)(f.A,{className:"mb-3",children:[Object(g.jsx)(f.B,{children:Object(g.jsx)(f.C,{children:Object(g.jsx)(x.b,{name:"cil-user"})})}),Object(g.jsx)(f.z,{type:"text",className:"form-control",placeholder:"C\xe9dula",autoComplete:"username",name:"username",value:d,onChange:function(e){var t=e.target.value;b(t)},validations:[v]})]}),Object(g.jsxs)(f.A,{className:"mb-4",children:[Object(g.jsx)(f.B,{children:Object(g.jsx)(f.C,{children:Object(g.jsx)(x.b,{name:"cil-lock-locked"})})}),Object(g.jsx)(f.z,{type:"password",className:"form-control",name:"password",value:N,onChange:function(e){var t=e.target.value;w(t)},validations:[v],placeholder:"Contrase\xf1a",autoComplete:"current-password"})]}),Object(g.jsxs)(f.e,{color:"primary",className:"w-100",disabled:y,onClick:B,children:[y&&Object(g.jsx)("span",{className:"spinner-border spinner-border-sm mx-1"}),Object(g.jsx)("span",{children:"Iniciar sesi\xf3n"})]}),J&&Object(g.jsx)("div",{className:"form-group",onClick:function(){z("")},children:Object(g.jsx)("div",{className:"alert alert-danger",role:"alert",children:J})}),Object(g.jsx)(l.a,{style:{display:"none"},className:"my-auto w-100",ref:a})]})})})})})})})})}}}]);
//# sourceMappingURL=12.5eff4110.chunk.js.map